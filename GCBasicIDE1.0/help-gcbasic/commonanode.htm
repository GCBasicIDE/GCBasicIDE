<html><head>
   <title>Common Anode Example</title>
   <meta name="generator"  content="HelpMaker.net" >
   <meta name="keywords"  content="PWM Overview," ></head>
<body bgcolor="FFFCEA" >
<table width="100%"  border="0"  cellspacing="0"  cellpadding="2"  bgcolor="C0C0C0" >
  <tr>
    <td align="left" >
      <div align="left" ><font face="Arial"  size="4" ><span style="font-size:14pt" >Common Anode</span></font><font color="#010101" ></font></div>

    </td>
    <td align="right" >
      <font face="Arial"  size="2" >
        <a href="commoncathode.htm">Previous</a>&nbsp;&nbsp;<a href="displayvalue.htm">Next</a>
      </font>
    </td>
  </tr></table>
<hr><div align="left" ><font face="Arial" ><span style="font-size:12pt" ><b>Additional configuration when using Common Anode</b></span></font><font color="#010101" ></font></div><div align="left" ><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial" ><span style="font-size:12pt" >When setting up the 7 segment Common Anode display you <b>MUST </b>use the following additional constants.</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ></font><font color="#010101" ></font></div><table border="1"  width="576"  cellpadding="3"  cellspacing="0"  style="border-collapse: collapse; border: none" >
    <tr>
    <td align="center"  valign="top"  width="183"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" ><b>Constant Name</b></span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="183"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" ><b>Controls</b></span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="183"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" ><b>Comment</b></span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="183"  height="19"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" >7Seg_CommonAnode</span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="183"  height="19"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" >Inverts controls for 
    Common Anode displays</span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="183"  height="19"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" >Required for Common 
    Cathode displays</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="183"  height="21"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" >7Seg_HighSide&nbsp;&nbsp;&nbsp; </span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="183"  height="21"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" >Support PFET or PNP 
    high side driving of the 
    display</span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="183"  height="21"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" >Inverts Common Cathode 
    addressing pin logic for 
    multiplexed displays</span></font><font color="#010101" ></font></div>
    </td></tr></table><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial" ><span style="font-size:12pt" ><b>Example:</b></span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >'A Common Anode 7 Segment display example using bs250p 
pfets </span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >'Chip model</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >#chip 16f1783,8</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Courier New" ><span style="font-size:10pt" >'support for Common Cathode</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:11pt" ><b>#define 7Seg_CommonAnode</b></span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Courier New"  color="#010101" ><span style="font-size:11pt" >'</span></font><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >support for</span></font><font face="Courier New"  color="#010101" ><span style="font-size:11pt" > 
pfet or pnp high side</span></font><font face="Courier New"  color="#010101" ><span style="font-size:10pt" > drivers</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:11pt" ><b>#define 7Seg_HighSide </b></span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >'#define DisplayPortA = PortC</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >'#define DisplayPortB = PortC</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >'#define DisplayPortC = PortC</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define DISP_SEG_A PORTC.0</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define DISP_SEG_B PORTC.1</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define DISP_SEG_C PORTC.2</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define DISP_SEG_D PORTC.3</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define DISP_SEG_E PORTC.4</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define DISP_SEG_F PORTC.5</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define DISP_SEG_G PORTC.6</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >'#define DISP_SEG_DOT PortC.7</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define Disp_Sel_1 PortA.1</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define Disp_Sel_2 PortA.2</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >#define Disp_Sel_3 PortA.3</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >dim count as word</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >dim number as word</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >Main:</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >For count = 0 to 999</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; number = count</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; Num2 = 0</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; Num3 = 0</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; If number &gt;= 100 Then</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Num3 = number / 100</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; number = SysCalcTempX</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; End if</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; If number &gt;= 10 Then</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Num2 = number / 10</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; number = SysCalcTempX</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; end if</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; Num1 = number</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; Repeat 10</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DisplayValue 1, Num1</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait 5 ms</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DisplayValue 2, Num2</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait 5 ms</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DisplayValue 3, Num3</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set PortC.7 <b>Off</b>&nbsp;&nbsp;&nbsp; 'CA manually inserted dp, 
like in a voltage reading</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wait 5 ms</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set PortC.7 On</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp; end Repeat</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:38mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >Next</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >Goto Main</span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>Also, see </b></span></font><a href="7segmentdisplaysoverview.htm"><font face="Arial"  color="#0000ff" ><span style="font-size:12pt" ><u>Relevant Constants</u></span></font></a><font face="Arial"  color="#010101" ><span style="font-size:12pt" >,&nbsp;<b> </b></span></font><a href="displaychar.htm"><font face="Arial"  color="#0000ff" ><span style="font-size:12pt" ><u>DisplayChar</u></span></font></a><font face="Arial"  color="#010101" ><span style="font-size:12pt" >, </span></font><a href="displayvalue.htm"><font face="Arial"  color="#0000ff" ><span style="font-size:12pt" ><u>DisplayValue</u></span></font></a><font color="#010101" ></font></div><div align="left" ><font color="#010101" ></font></div>

</html>
