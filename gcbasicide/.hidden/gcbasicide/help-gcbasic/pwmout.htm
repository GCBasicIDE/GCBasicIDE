<html><head>
   <title>PWMOut</title>
   <meta name="generator"  content="HelpMaker.net" >
   <meta name="keywords"  content="PWM Overview," ></head>
<body bgcolor="FFFCEA" >
<table width="100%"  border="0"  cellspacing="0"  cellpadding="2"  bgcolor="C0C0C0" >
  <tr>
    <td align="left" >
      <div align="left" ><font face="Arial"  color="#010101"  size="4" ><span style="font-size:14pt" >PWMOut</span></font><font color="#010101" ></font></div>

    </td>
    <td align="right" >
      <font face="Arial"  size="2" >
        <a href="relevantconstants.htm">Previous</a>&nbsp;&nbsp;<a href="pwmoff.htm">Next</a>
      </font>
    </td>
  </tr></table>
<hr><div align="left" ><font face="Arial" ><span style="font-size:12pt" ><b>Syntax:&nbsp;&nbsp;&nbsp;&nbsp;</b></span></font><font color="#010101" ></font></div><div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >&nbsp;&nbsp;&nbsp;&nbsp;PWMOut <i>channel, duty cycle, cycles</i></span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial" ><span style="font-size:12pt" ><b>Command Availability:</b></span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >Available on all microcontrollers.</span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>Explanation:</b></span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#010101" ><span style="font-size:12pt" > This command uses a software PWM routine included in GCBASIC to 
produce a PWM signal on the selected port of the chip. This routine 
does NOT require a PWM module on the chip.</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><i>channel&nbsp;</i> sets the channel that the PWM is to be generated on. This 
must have been defined previously by setting the constants 
SoftPWM1, SoftPWM2, etc. The maximum number of channels 
available is 4.</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><i>duty cycle </i>specifies the PWM duty cycle, and ranges from 0 to 255. 
255 corresponds to 100%, 127 to 50%, 63 to 25%, and so on.</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><i>cycles&nbsp;</i> is used to set the amount of PWM pulses to supply. This is 
useful for situations in which a pulse of a specific length is required. 
The formula for calculating the time taken for one cycle is:</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" >T<sub>CYCLE</sub> = (28 + 10C)T<sub>OSC </sub>+ 255PWM_Delay,</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" >where C is the number of channels used and T<sub>OSC</sub> is the length of time 
taken to execute 1 instruction on the chip (0.2 us on a 20 MHz chip, 1 
us on a 4 Mhz chip). PWM_Delay is a length of time specified using 
the PWM_Delay constant.</span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>Example:</b></span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;'This program controls the brightness of an LED on PORTB.0 
&nbsp;&nbsp;&nbsp;&nbsp;'using the software PWM routine and a potentiometer.</span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;'Select chip model</span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;#chip 16F877A, 20</span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;'Set PWM Port</span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;#define PWM_Out1 PORTB.0</span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;'Set port directions</span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;dir SoftPWM1 out&nbsp;&nbsp;&nbsp;&nbsp;'PWM</span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;dir PORTA.0 in&nbsp;&nbsp;&nbsp;&nbsp;'Potentiometer</span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;'Main routine</span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;do</span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PWMOut 1, ReadAD(AN0), 100 &nbsp;&nbsp;&nbsp;&nbsp;'100 cycles is a purely</span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'arbitrary value here.</span></font><font color="#010101" ></font></div><div align="left" ><font face="Terminal"  color="#010101" ><span style="font-size:10pt" >&nbsp;&nbsp;&nbsp;&nbsp;loop</span></font><font color="#010101" ></font></div><div align="left" ><font color="#010101" ></font></div>

</html>
